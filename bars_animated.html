<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="index.css">
    <script type="text/javascript" src="countUp.min.js"></script>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<div id="appbar">

</div>
<div id="list">
    <div class="list_item">
        <span class="icon_container" id="food"></span>
        <span class="content_container">
            <span class="category_name">Mancare</span>
            <span class="delta"></span>
            <span class="amount" id="food_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>

    </div>
    <div class="list_item">
        <span class="icon_container" id="card"></span>
        <span class="content_container">
            <span class="category_name">Retragere numerar</span>
            <span class="delta"></span>
            <span class="amount" id="card_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>
    </div>
    <div class="list_item">
        <span class="icon_container" id="work"></span>
        <span class="content_container">
            <span class="category_name">Afaceri</span>
            <span class="delta"></span>
            <span class="amount" id="work_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>
    </div>
    <div class="list_item">
        <span class="icon_container" id="shopping"></span>
        <span class="content_container">
            <span class="category_name">Cumparaturi</span>
            <span class="delta"></span>
            <span class="amount" id="shopping_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>
    </div>
    <div class="list_item">
        <span class="icon_container" id="other"></span>
        <span class="content_container">
            <span class="category_name">Diverse</span>
            <span class="delta"></span>
            <span class="amount" id="other_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>
    </div>
    <div class="list_item">
        <span class="icon_container" id="baby"></span>
        <span class="content_container">
            <span class="category_name">Copil</span>
            <span class="delta"></span>
            <span class="amount" id="baby_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>
    </div>
    <div class="list_item">
        <span class="icon_container" id="car"></span>
        <span class="content_container">
            <span class="category_name">Transport</span>
            <span class="delta"></span>
            <span class="amount" id="car_amount"></span>
            <span class="currency">RON</span>
            <span class="contextual_container">
            </span>
        </span>
    </div>

</div>

<script>

    $(document).ready(function(){

        function skewedRandom() {
            const a = Math.pow(Math.random(), 2);
            if (Math.random() < 0.5) {
                return a;
            }
            return 1 - a;
        }


        var totalAmount = 0;
        var amounts = [];

        var maxAnimationDuration = 700;
        var maxAmount = 0;

        $( ".list_item" ).each(function( index ) {

            var amountValue = Math.floor(skewedRandom() * 5000);
            amounts[index] = amountValue;
            totalAmount += amountValue;
            if (amountValue > maxAmount){
                maxAmount = amountValue;
            }
        });

        amounts.sort(function(a, b){
            if (a>b){
                return -1;
            }

            if (a==b){
                return 0;
            }

            if (a<b){
                return 1;
            }

        });

        $( ".list_item" ).each(function( index ) {
            $(this).find(".amount").first().text(amounts[index]);
        });

        $( ".content_container" ).each(function( index ) {

            var amount = amounts[index];
            var maxWidth = $(this).width();

            var barWidth = (amount * maxWidth) / totalAmount;
            var animationDuration = (amount * maxAnimationDuration) / maxAmount;

            var element = document.createElement('div');
            $(element).addClass("bar");
            $(element).appendTo($(this));

            $(element).animate({
                width: barWidth,

            }, animationDuration);

        });
    });





</script>

</body>
</html>
